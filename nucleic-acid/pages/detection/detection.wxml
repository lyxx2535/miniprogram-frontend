<!--nucleic-acid/pages/detection/detection.wxml-->
<view class="card mt-20px" wx:for="{{list}}" wx:key="index" id="item{{index + 1}}">

<view class="mt-30px flex">
  <image src="{{img_url.notice}}" class="inline-block h-15 w-20" style="z-index: 999;"></image>
  <text class="inline-block mt-3 text-xl font-semibold">{{item.name}}</text>
  <image class="mt-2 h-7 w-16 ml-auto" wx:if="{{item.status.ongoing}}" src="{{img_url.ongoing}}"></image>
  <image class="mt-2 h-7 w-16 ml-auto" wx:if="{{item.status.over}}" src="{{img_url.over}}"></image>
  <image class="mt-2 h-7 w-16 ml-auto" wx:if="{{item.status.miss}}" src="{{img_url.miss}}"></image>
</view>

<view class="ml-20">检测时间：{{item.time}}</view>
<view class="ml-20 mt-2">检测地点：{{item.spot}}</view>
<view class="ml-20 mt-2">检测要求：{{item.requirement}}</view>

<view class="flex flex-grow-0 relative">
<!-- TODO：激活按钮绑定跳转事件和处理事件 -->
  <button  wx:if="{{item.status.ongoing}}" class="btn btn_2" style="background-color: #d0cece;" bindtap="tapDetection" data-index="{{index}}">我已检测</button>
  <button  wx:if="{{item.status.over}}" class="btn btn_2" style="background-color: #f0efef; color: #d0cece;">我已检测</button>
  <button  wx:if="{{item.status.miss}}" class="btn btn_2" style="background-color: #f0efef; color: #d0cece;">我已检测</button>
</view>

<view class="divide_line"></view>

<view class="flex relative">
  <image src="{{img_url.remind}}" class="inline-block h-11 w-15"></image>
  <text class="mt-2 font-semibold" >检测提醒</text>
  <!-- TODO：switch绑定处理事件 -->
  <view class="flex-1 text-right relative" style="right: 30rpx;margin-top: 4rpx;">
    <switch wx:if="{{item.status.over}}" disabled="true"></switch>
      <switch wx:if="{{item.status.miss}}" disabled="true"></switch>
      <switch wx:if="{{item.status.ongoing}}" checked="{{item.isOpenRemind}}" bindchange="switchChange" data-status="open" data-index="{{index}}" color="#595959"></switch>
  </view>
</view>
<!-- 选择提醒后弹出的表单 -->
<view class="drawer_screen" bindtap="confirmRemind" data-status="close" data-close="true" wx:if="{{isShowForm}}"></view> 
  <view animation="{{animationData}}" class="drawer_box" wx:if="{{isShowForm}}"> 
    <view class="drawer_title">自定义/确认提醒内容</view> 
    <view class="drawer_content">
      <view class="top grid"> 
        <label class="title col-0">上报人</label> 
        <input class="input_base input_h30 col-1" value="{{userName}}"></input> 
      </view> 
      <view class="top grid"> 
        <label class="title col-0">上报内容</label> 
        <input class="input_base input_h30 col-1" value="{{list[currentIndex].name}}"></input> 
      </view>
      <view class="top grid"> 
        <label class="title col-0">提醒时间</label> 
        <picker  mode="date" header-text="选择时间" value="{{date}}"  bindchange="bindDateChange">
          <view style="font-size: 24rpx;margin-top: 12rpx;margin-left: 3rpx;">
            <text style="letter-spacing:3rpx;font-weight: 300;">{{date}}</text>
            <text style="color: rgb(121, 121, 121); margin-top: 50rpx; margin-left: 3rpx;" >▼</text>
          </view>
        </picker> 
      </view> 
      <view class="top bottom grid"> 
        <label class="title col-0">备注</label> 
        <input class="input_base input_h30 col-1" value="记得及时检测哦~"></input> 
      </view> 
    </view> 
    <view class="btn_ok" bindtap="confirmRemind" data-status="close" data-close="false">确定</view> 
  </view>
</view>
